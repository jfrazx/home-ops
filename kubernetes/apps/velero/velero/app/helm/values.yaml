---
deployNodeAgent: true
installCRDs: true
cleanUpCRDs: false

configuration:
  backupStorageLocation:
    - name: minio
      provider: aws
      bucket: velero
      config:
        region: us-east-1
        s3ForcePathStyle: true
        s3Url: http://minio.storage.svc.cluster.local:9000
  volumeSnapshotLocation:
    - name: ceph-csi
      provider: csi
  defaultVolumesToFsBackup: false
  uploaderType: kopia

credentials:
  existingSecret: velero-minio-credentials

initContainers:
  - name: velero-plugin-for-aws
    image: velero/velero-plugin-for-aws:v1.11.0
    volumeMounts:
      - mountPath: /target
        name: plugins
  - name: velero-plugin-for-csi
    image: velero/velero-plugin-for-csi:v0.8.0
    volumeMounts:
      - mountPath: /target
        name: plugins

resources:
  requests:
    cpu: 500m
    memory: 128Mi
  limits:
    memory: 512Mi

nodeAgent:
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      memory: 1Gi

metrics:
  enabled: true
  serviceMonitor:
    enabled: true
  nodeAgentPodMonitor:
    enabled: true

snapshotsEnabled: true
features: EnableCSI
